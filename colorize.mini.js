javascript:(()=>{if(typeof requestAnimationFrame!=="function"){window.requestAnimationFrame=e=>setTimeout(e,16);}if(typeof cancelAnimationFrame!=="function"){window.cancelAnimationFrame=e=>clearTimeout(e);}if(!window.randomColorToggler){window.randomColorToggler={running:false,stopping:false,originalStyles:new WeakMap(),schedule:[],rafId:null,initialized:false}}const s=window.randomColorToggler,c=()=>{try{return"#"+Math.floor(Math.random()*16777215).toString(16)}catch(e){console.error("Error generating random color:",e);return"#000000"}},f=()=>{try{return Math.floor(Math.random()*1500)+1}catch(e){console.error("Error generating random delay:",e);return 500}},g=()=>{let e;try{e=[...document.querySelectorAll("*")]}catch(t){console.error("Error querying elements:",t);return}const n=performance.now();if(!s.initialized){for(const t of e)t&&t.getAttribute&&s.originalStyles.set(t,t.getAttribute("style"));s.initialized=true}s.schedule=e.map(e=>({el:e,nextTime:n+f(),mode:"color"})),s.running=true,s.stopping=false,m(n)},d=()=>{if(s.stopping)return;const e=performance.now();s.stopping=true;for(const t of s.schedule)t.nextTime=e+f(),t.mode="revert"},p=()=>{s.rafId&&cancelAnimationFrame(s.rafId),s.rafId=null,s.running=false,s.stopping=false,s.schedule=[]},y=e=>{try{if(!e)return;const t=s.originalStyles.get(e);null===t?e.removeAttribute("style"):e.setAttribute("style",t)}catch(t){console.error("Error restoring original style:",t)}},h=e=>{try{e&&(e.style.backgroundColor=c(),e.style.color=c())}catch(t){console.error("Error applying random color:",t)}},m=function e(t){if(!s.running&&!s.stopping)return;let n=[];try{for(const r of s.schedule){const o=r.el;if(!o||!o.parentNode)continue;if(t>=r.nextTime){"color"===r.mode&&s.running&&!s.stopping?(h(o),r.nextTime=t+f(),n.push(r)):"revert"===r.mode?y(o):n.push(r)}else n.push(r)}}catch(r){console.error("Error during update cycle:",r)}s.schedule=n,s.stopping&&0===s.schedule.length?(p(),void 0):(s.running||s.stopping)&&(s.rafId=requestAnimationFrame(e))};s.running&&!s.stopping?d():s.running&&s.stopping||g()})();
