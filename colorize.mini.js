javascript:(()=>{if(!window.randomColorToggler){window.randomColorToggler={running:false,stopping:false,originalStyles:new WeakMap(),schedule:[],rafId:null,initialized:false}}const e=window.randomColorToggler,t=()=>"#"+Math.floor(Math.random()*16777215).toString(16),n=()=>Math.floor(1500*Math.random())+1,o=()=>{const o=[...document.querySelectorAll("*")],r=performance.now();e.initialized||(o.forEach(o=>{e.originalStyles.set(o,o.getAttribute("style"))}),e.initialized=true),e.schedule=o.map(e=>({el:e,nextTime:r+n(),mode:"color"})),e.running=true,e.stopping=false,a(r)},r=()=>{const t=performance.now();e.stopping=true,e.schedule.forEach(e=>{e.nextTime=t+n(),e.mode="revert"})},i=()=>{e.rafId&&cancelAnimationFrame(e.rafId),e.rafId=null,e.running=false,e.stopping=false,e.schedule=[]},a=o=>{if(!e.running&&!e.stopping)return;let c=[];for(const s of e.schedule)if(o>=s.nextTime)if("color"===s.mode&&e.running&&!e.stopping)s.el.style.backgroundColor=t(),s.el.style.color=t(),s.nextTime=o+n(),c.push(s);else if("revert"===s.mode){const t=e.originalStyles.get(s.el);null===t?s.el.removeAttribute("style"):s.el.setAttribute("style",t)}else c.push(s);else c.push(s);e.schedule=c,e.stopping&&0===e.schedule.length?(i(),void 0):(e.running||e.stopping)&&(e.rafId=requestAnimationFrame(a))};e.running&&!e.stopping?r():e.running&&e.stopping||o()})();
